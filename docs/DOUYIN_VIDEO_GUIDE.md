# 抖音康复视频添加指南

## 📱 如何添加抖音博主的康复视频

### 方法一：通过视频管理后台（推荐）

#### 步骤 1：访问视频管理页面

在微信开发者工具中运行小程序后：

```
访问路径：/pages/admin/init-videos
```

或在首页URL栏输入：`pages/admin/init-videos`

#### 步骤 2：从抖音获取视频链接

1. **打开抖音APP**，找到康复训练相关视频
2. 点击视频右下角的**分享按钮**
3. 选择**复制链接**
4. 链接示例：
   ```
   https://v.douyin.com/ieFxxxxxx/
   或
   2.31 CXf:/ 03/04 m@x.bV 膝关节康复训练...  https://v.douyin.com/ieFxxxxxx/ 复制...
   ```

#### 步骤 3：填写视频信息

在视频管理页面填写以下信息：

| 字段 | 说明 | 示例 |
|-----|------|------|
| **视频标题** | 简短描述视频内容 | "膝关节康复训练 - I期基础动作" |
| **视频描述** | 详细说明训练内容、注意事项 | "适合早期骨关节炎患者，包含股四头肌训练等" |
| **视频来源** | 选择"抖音链接" | - |
| **抖音视频链接** | 粘贴第2步复制的链接 | `https://v.douyin.com/ieFxxxxxx/` |
| **视频时长** | 视频播放时间（秒） | 300（5分钟） |
| **难度等级** | 简单/中等/困难 | 简单 |
| **训练类别** | 力量/柔韧性/平衡 | 柔韧性 |
| **适用分期** | I期/II期/III期/IV期 | 勾选 I期 |

#### 步骤 4：提交视频

点击**"添加视频"**按钮，系统会自动保存到数据库。

---

## 🎯 如何根据患者分期推送合适的视频

### 分期推荐策略

系统会根据患者的MRI诊断结果自动推荐合适的视频：

#### I期（早期骨关节炎）
- **难度**：简单
- **训练类型**：柔韧性 + 轻度力量
- **推荐视频数量**：6个
- **每周目标**：5次训练
- **示例动作**：
  - 股四头肌等长收缩
  - 踝泵运动
  - 直腿抬高
  - 关节活动度训练

#### II期（轻度骨关节炎）
- **难度**：简单 + 中等
- **训练类型**：力量 + 柔韧性 + 平衡
- **推荐视频数量**：8个
- **每周目标**：5次训练
- **示例动作**：
  - 坐姿膝关节屈伸
  - 直腿抬高（进阶版）
  - 靠墙静蹲
  - 单腿平衡训练

#### III期（中度骨关节炎）
- **难度**：简单
- **训练类型**：柔韧性为主
- **推荐视频数量**：6个
- **每周目标**：3次训练
- **示例动作**：
  - 温和的关节活动
  - 坐位训练
  - 辅助行走训练

#### IV期（重度骨关节炎）
- **难度**：简单
- **训练类型**：轻柔的活动
- **推荐视频数量**：4个
- **每周目标**：3次训练
- **示例动作**：
  - 被动关节活动
  - 坐位轻柔训练
  - 辅助器械训练

---

## 🔧 高级配置：修改推荐规则

如果需要自定义推荐规则，可以修改云函数：

### 编辑文件：`uniCloud-aliyun/cloudfunctions/createRehabPlan/index.js`

```javascript
// 修改每期推荐的视频数量和难度
const stageConfig = {
  'I': {
    difficulties: ['easy'],           // 只推荐简单视频
    categories: ['flexibility'],       // 柔韧性训练
    maxVideos: 6,                     // 最多6个视频
    weeklyGoal: 5                     // 每周5次
  },
  'II': {
    difficulties: ['easy', 'medium'],  // 简单+中等
    categories: ['strength', 'flexibility', 'balance'],
    maxVideos: 8,
    weeklyGoal: 5
  },
  'III': {
    difficulties: ['easy'],
    categories: ['flexibility'],
    maxVideos: 6,
    weeklyGoal: 3
  },
  'IV': {
    difficulties: ['easy'],
    categories: ['flexibility'],
    maxVideos: 4,
    weeklyGoal: 3
  }
};
```

---

## 📋 批量添加视频的建议

### 1. 准备视频清单

创建一个Excel表格，记录所有要添加的视频信息：

| 序号 | 视频标题 | 抖音链接 | 时长 | 难度 | 分期 | 类别 |
|-----|---------|---------|-----|-----|-----|-----|
| 1 | I期基础训练1 | https://v.douyin.com/xxx1/ | 300 | 简单 | I | 柔韧性 |
| 2 | I期基础训练2 | https://v.douyin.com/xxx2/ | 360 | 简单 | I | 柔韧性 |
| ... | ... | ... | ... | ... | ... | ... |

### 2. 推荐的视频数量配置

建议为每个分期准备以下数量的视频：

- **I期**：至少 8-10 个视频
- **II期**：至少 10-12 个视频
- **III期**：至少 6-8 个视频
- **IV期**：至少 5-6 个视频

这样系统可以根据用户的进度推荐不同的视频，避免重复。

### 3. 视频标题命名规范

建议使用统一的命名格式：

```
[分期]-[类别]-[训练部位]-[难度]

示例：
- "I期-柔韧性-股四头肌拉伸-简单"
- "II期-力量-靠墙静蹲-中等"
- "III期-柔韧性-坐位关节活动-简单"
```

---

## ⚠️ 注意事项

### 1. 视频版权问题
- 确保使用的抖音视频有合法授权
- 建议联系视频博主获得使用许可
- 可以考虑与康复治疗师合作拍摄原创视频

### 2. 视频质量要求
- **清晰度**：至少720p
- **时长**：建议5-10分钟
- **内容**：动作标准、讲解清晰
- **安全性**：必须包含注意事项说明

### 3. 抖音链接的限制
- 抖音分享链接可能有时效性
- 建议定期检查链接是否有效
- 重要视频建议下载后上传到云存储

### 4. 替代方案：使用云存储

如果担心抖音链接失效，可以：

1. **下载视频**（需获得授权）
2. **上传到uniCloud云存储**：
   - HBuilderX → 右键 uniCloud-aliyun → 云存储管理
   - 上传到 `rehab-videos/` 目录
3. **复制云存储URL**
4. 在视频管理页面选择**"云存储"**，粘贴URL

---

## 🧪 测试流程

### 完整测试步骤

1. **添加视频**
   - 进入视频管理页面
   - 添加至少3个不同分期的视频

2. **创建诊断记录**
   - 进入图像诊断页面
   - 上传MRI图像
   - 完成诊断，保存结果

3. **创建训练计划**
   - 诊断后点击"创建康复计划"
   - 系统自动根据分期推荐视频

4. **查看康复训练**
   - 进入康复训练页面
   - 查看推荐的视频列表
   - 确认视频符合该分期的特点

5. **测试视频播放**
   - 点击任意视频
   - 测试视频能否正常播放
   - 观看至少30%

6. **测试打卡功能**
   - 点击"完成打卡"
   - 填写难度、疼痛程度、笔记
   - 提交打卡
   - 确认获得积分和连续天数

---

## 💡 最佳实践

### 1. 视频内容组织

**为每个分期准备多样化的视频**：
- 30% 柔韧性训练
- 40% 力量训练
- 20% 平衡训练
- 10% 综合训练

### 2. 视频描述要详细

包含以下信息：
- 训练目标（例如：增强股四头肌力量）
- 适合人群（例如：I期早期患者）
- 训练频率（例如：每天1次）
- 注意事项（例如：如感疼痛立即停止）

### 3. 定期更新内容

- 每月检查视频链接有效性
- 根据用户反馈调整视频推荐
- 添加新的训练内容和方法

---

## 📞 常见问题

### Q1：抖音链接无法播放怎么办？
**A**：可能原因：
- 链接已失效
- 视频已被删除或设为私密
- 网络问题

**解决方案**：
- 重新获取最新的分享链接
- 下载视频上传到云存储
- 联系博主确认视频状态

### Q2：如何批量添加大量视频？
**A**：目前支持单个添加，如需批量导入：
1. 准备JSON格式的视频数据
2. 在uniCloud控制台直接导入到 `rehabilitation_videos` 集合
3. 或联系开发者提供批量导入工具

### Q3：视频推荐不准确怎么办？
**A**：检查以下设置：
- 视频的 `targetStage` 字段是否正确
- 视频的 `difficulty` 字段是否符合分期要求
- 修改 `createRehabPlan` 云函数的推荐规则

### Q4：如何查看视频的播放数据？
**A**：视频数据包括：
- `views`：观看次数
- `completions`：完成打卡次数
- 在数据库中可以查看这些统计数据

---

## 🎉 快速开始示例

### 添加第一个康复视频

```plaintext
标题：膝关节康复训练 - I期股四头肌激活
描述：适合I期早期患者的基础力量训练，包括股四头肌等长收缩、踝泵运动等动作。建议每天练习1-2次，每个动作10-15次。
来源：抖音链接
链接：https://v.douyin.com/ieFxxxxxx/
时长：420秒（7分钟）
难度：简单
类别：柔韧性
分期：☑ I期
```

---

**文档更新时间**：2025-10-24  
**版本**：v1.0  
**技术支持**：AI Doctor 开发团队
