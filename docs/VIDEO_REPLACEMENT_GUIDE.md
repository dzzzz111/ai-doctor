# 🎬 康复训练视频替换完整指南

## 🔍 问题说明

当前系统中的视频使用的是**W3C测试视频链接**（如Big Buck Bunny动画），不是真实的康复训练视频。

需要替换为实际的膝关节康复训练视频。

---

## ✅ 解决方案（3种方法）

### 方法1：使用视频管理后台清空并重新添加（推荐）⭐

#### 第1步：清空测试视频
1. 访问视频管理页面：`/pages/admin/init-videos`
2. 在"已添加的视频"区域
3. 点击**"清空测试视频"**按钮
4. 确认清空

#### 第2步：添加真实视频
使用"添加抖音视频"表单，逐个添加：

**示例1：I期股四头肌训练**
```
视频标题：股四头肌等长收缩训练 - I期基础
视频描述：平躺后腿部伸直，膝部下压...
视频来源：抖音链接
抖音链接：[从抖音复制的真实链接]
时长：300秒
难度：简单
类别：力量训练
适用分期：☑ I期
```

**如何获取抖音视频链接：**
1. 打开抖音APP
2. 搜索：`股四头肌训练`、`膝关节康复`等
3. 找到专业医疗机构发布的视频
4. 点击"分享" → "复制链接"
5. 粘贴到表单中

---

### 方法2：在uniCloud控制台直接修改

#### 第1步：打开云数据库
```
uniCloud控制台 → 云数据库 → rehabilitation_videos 集合
```

#### 第2步：编辑视频记录
1. 找到要修改的视频记录
2. 点击"编辑"
3. 修改 `videoUrl` 字段：
   - 替换为抖音链接或其他视频URL
   - 例如：`https://v.douyin.com/ieFxxxxxx/`
4. 保存

#### 第3步：验证
1. 刷新小程序康复训练页面
2. 点击视频播放
3. 确认播放的是正确的康复训练内容

---

### 方法3：上传视频到云存储

#### 第1步：下载康复训练视频
从专业渠道获取康复训练视频文件（MP4格式）

#### 第2步：上传到云存储
1. 打开 uniCloud 控制台
2. 云存储 → 上传文件
3. 创建文件夹：`rehab-videos`
4. 上传视频文件

#### 第3步：获取云存储路径
1. 上传成功后，复制文件ID
2. 格式类似：`cloud://xxx.../rehab-videos/video1.mp4`

#### 第4步：更新数据库
1. 进入云数据库 → `rehabilitation_videos`
2. 编辑对应记录
3. 将 `videoUrl` 改为云存储路径

---

## 📋 推荐视频内容清单

### I期视频（至少6个）- 早期/轻度患者

| 视频名称 | 训练内容 | 抖音搜索关键词 |
|---------|---------|--------------|
| 股四头肌等长收缩 | 最基础的肌肉训练 | `股四头肌训练` |
| 直腿抬高运动 | 增强股四头肌力量 | `直腿抬高` |
| 踝泵运动 | 促进血液循环 | `踝泵运动` |
| 腘绳肌拉伸 | 改善柔韧性 | `腘绳肌拉伸` |
| 小腿拉伸 | 改善踝关节灵活性 | `小腿拉伸` |
| 坐姿踝关节运动 | 维持关节活动度 | `踝关节训练` |

### II期视频（至少8个）- 中度患者

| 视频名称 | 训练内容 | 抖音搜索关键词 |
|---------|---------|--------------|
| 坐姿膝伸直运动 | 可加重物训练 | `坐姿膝伸展` |
| 桥式运动 | 臀部强化 | `桥式运动教学` |
| 靠墙静蹲 | 力量与耐力 | `靠墙静蹲标准动作` |
| 侧卧抬腿 | 髋外展训练 | `侧卧抬腿` |
| 坐立行进 | 髋屈曲训练 | `髋屈肌训练` |
| 枕头夹膝 | 内收肌训练 | `内收肌训练` |
| 单腿平衡训练 | 稳定性强化 | `单腿平衡` |
| 提踵运动 | 小腿力量 | `提踵训练` |

### III期视频（至少3个）- 中重度患者

| 视频名称 | 训练内容 | 抖音搜索关键词 |
|---------|---------|--------------|
| 温和关节活动 | 维持训练 | `温和关节活动` |
| 坐站练习 | 功能训练 | `坐站训练` |
| 轻度步行训练 | 有氧运动 | `步行训练` |

### IV期视频（至少2个）- 重度患者

| 视频名称 | 训练内容 | 抖音搜索关键词 |
|---------|---------|--------------|
| 床上被动活动 | 基础维持 | `被动关节活动` |
| 椅上轻柔运动 | 安全训练 | `椅上运动` |

---

## 🎯 视频选择标准

### 内容要求
✅ **专业性**：由医疗机构或专业康复师发布  
✅ **标准性**：动作标准、讲解清晰  
✅ **完整性**：时长3-10分钟，包含完整演示  
✅ **安全性**：包含注意事项和安全提示  

### 技术要求
✅ **清晰度**：至少720P  
✅ **可访问性**：视频为公开状态  
✅ **稳定性**：链接不易失效（建议使用云存储）  

### 推荐视频来源
1. **医院官方抖音**（最推荐）
   - 协和医院、华西医院、301医院等
   - 搜索：医院名 + 康复科

2. **专业康复师账号**
   - 认证的康复师、物理治疗师
   - 查看账号认证标识

3. **运动医学机构**
   - 专业运动康复中心
   - 骨科康复专科

---

## 🚀 快速部署步骤

### 1. 上传更新后的云函数
```
右键 uniCloud-aliyun/cloudfunctions/initRehabVideos
→ 上传并部署
```

### 2. 访问视频管理页面
```
小程序或浏览器访问：/pages/admin/init-videos
```

### 3. 清空测试视频
点击"清空测试视频"按钮

### 4. 逐个添加真实视频
使用抖音视频链接或云存储路径

### 5. 验证功能
- 进入康复训练页面
- 点击视频播放
- 确认内容正确

---

## 🔧 故障排查

### Q1：视频无法播放
**可能原因**：
- 抖音链接失效或视频已删除
- 视频为私密状态
- 网络连接问题

**解决方法**：
1. 重新获取最新的分享链接
2. 确认视频为公开状态
3. 考虑上传到云存储

### Q2：视频加载很慢
**可能原因**：
- 视频文件过大
- 网络带宽不足

**解决方法**：
1. 使用720P而非1080P视频
2. 压缩视频文件大小
3. 使用CDN加速

### Q3：抖音视频在小程序中无法播放
**可能原因**：
- 小程序不支持该视频格式
- 抖音防盗链限制

**解决方法**：
1. 将视频下载后上传到云存储
2. 使用支持的视频格式（MP4推荐）
3. 配置视频播放权限

---

## 📊 批量更新脚本（可选）

如果需要批量更新大量视频，可以编写脚本：

```javascript
// 在uniCloud云函数中执行
const videoUpdates = [
  {
    _id: '视频ID1',
    videoUrl: '新的抖音链接1'
  },
  {
    _id: '视频ID2',
    videoUrl: '新的抖音链接2'
  }
  // ... 更多视频
];

for (const update of videoUpdates) {
  await db.collection('rehabilitation_videos')
    .doc(update._id)
    .update({
      videoUrl: update.videoUrl
    });
}
```

---

## 💡 最佳实践建议

1. **优先使用云存储**
   - 更稳定，不受第三方平台影响
   - 可以控制视频质量和大小
   - 加载速度更快

2. **定期检查视频链接**
   - 抖音链接可能失效
   - 建议每月检查一次

3. **准备备用方案**
   - 同一训练内容准备多个视频源
   - 云存储 + 抖音双备份

4. **收集用户反馈**
   - 视频是否清晰
   - 讲解是否易懂
   - 时长是否合适

---

## 📞 技术支持

如遇到问题，可以：
1. 查看云函数日志排查错误
2. 检查数据库集合权限
3. 确认视频URL格式正确

---

**文档更新时间**：2025-10-24  
**版本**：v1.1
