<view class="container"><view class="header"><view class="status-bar"></view><view class="nav-bar"><view data-event-opts="{{[['tap',[['goBack',['$event']]]]]}}" class="back-btn" bindtap="__e"><text class="iconfont icon-back">←</text></view><text class="header-title">AI智能问诊</text><view class="placeholder"></view></view></view><view class="chat-container"><scroll-view class="message-list" scroll-y="{{true}}" scroll-top="{{scrollTop}}" scroll-with-animation="{{true}}"><block wx:for="{{messageList}}" wx:for-item="message" wx:for-index="index" wx:key="index"><view class="message-item"><block wx:if="{{message.type==='user'}}"><view class="message user-message"><view class="message-content user-content"><text>{{message.content}}</text></view><view class="message-avatar user-avatar"><image src="/static/images/user-avatar.png" mode="aspectFill"></image></view></view></block><block wx:else><view class="message ai-message"><view class="message-avatar ai-avatar"><image src="/static/images/ai-avatar.png" mode="aspectFill"></image></view><view class="message-content ai-content"><text>{{message.content}}</text><view class="message-time">{{message.time}}</view></view></view></block></view></block><block wx:if="{{isStreaming}}"><view class="message-item"><view class="message ai-message"><view class="message-avatar ai-avatar"><image src="/static/images/ai-avatar.png" mode="aspectFill"></image></view><view class="message-content ai-content"><text>{{streamingMessage}}</text><view class="message-time">{{$root.m0}}</view></view></view></view></block><block wx:if="{{isLoading&&!isStreaming}}"><view class="loading-message"><view class="message-avatar ai-avatar"><image src="/static/images/ai-avatar.png" mode="aspectFill"></image></view><view class="loading-dots"><view class="dot"></view><view class="dot"></view><view class="dot"></view></view></view></block></scroll-view><view class="input-area"><view class="input-wrapper"><textarea class="message-input" placeholder="请描述您的症状..." maxlength="{{500}}" auto-height="{{true}}" data-event-opts="{{[['confirm',[['sendMessage',['$event']]]],['input',[['__set_model',['','inputMessage','$event',[]]]]]]}}" value="{{inputMessage}}" bindconfirm="__e" bindinput="__e"></textarea><view class="input-actions"><text class="char-count">{{$root.g0+"/500"}}</text><view data-event-opts="{{[['tap',[['sendMessage',['$event']]]]]}}" class="{{['send-btn',($root.g1)?'disabled':'']}}" bindtap="__e"><text>发送</text></view></view></view></view></view></view>