# ğŸ‹ï¸ åº·å¤è®­ç»ƒæ‰“å¡ç³»ç»Ÿ - å®ç°è¯´æ˜

## âœ… å·²å®ŒæˆåŠŸèƒ½

### 1. äº‘å‡½æ•°ï¼ˆ3ä¸ªï¼‰

#### createRehabPlan
- **è·¯å¾„**ï¼š`uniCloud-aliyun/cloudfunctions/createRehabPlan/index.js`
- **åŠŸèƒ½**ï¼šæ ¹æ®MRIè¯Šæ–­ç»“æœè‡ªåŠ¨åˆ›å»ºä¸ªæ€§åŒ–åº·å¤è®­ç»ƒè®¡åˆ’
- **è¾“å…¥**ï¼šuserId, diagnosisId
- **è¾“å‡º**ï¼šplanId, stage, weeklyGoal, videoCount

#### getRehabPlan
- **è·¯å¾„**ï¼š`uniCloud-aliyun/cloudfunctions/getRehabPlan/index.js`
- **åŠŸèƒ½**ï¼šè·å–ç”¨æˆ·å½“å‰è®­ç»ƒè®¡åˆ’å’Œè¿›åº¦
- **è¾“å…¥**ï¼šuserId
- **è¾“å‡º**ï¼šplan, videos, weekCheckIns, todayCheckIns, streak

#### trainingCheckIn
- **è·¯å¾„**ï¼š`uniCloud-aliyun/cloudfunctions/trainingCheckIn/index.js`
- **åŠŸèƒ½**ï¼šè®­ç»ƒæ‰“å¡ï¼Œè®°å½•æ•°æ®å¹¶è®¡ç®—è¿ç»­å¤©æ•°
- **è¾“å…¥**ï¼šuserId, planId, videoId, duration, feedback
- **è¾“å‡º**ï¼špoints, streak, achievements

### 2. å‰ç«¯é¡µé¢ï¼ˆ2ä¸ªï¼‰

#### åº·å¤è®­ç»ƒä¸»é¡µ
- **è·¯å¾„**ï¼š`pagesA/rehabilitation/index.vue`
- **åŠŸèƒ½**ï¼š
  - æ˜¾ç¤ºè®­ç»ƒè®¡åˆ’è¿›åº¦ï¼ˆå½“å‰å‘¨æ¬¡ã€å®Œæˆåº¦ï¼‰
  - æ˜¾ç¤ºç»Ÿè®¡æ•°æ®ï¼ˆæœ¬å‘¨æ‰“å¡ã€ç´¯è®¡æ‰“å¡ã€è¿ç»­å¤©æ•°ï¼‰
  - å±•ç¤ºæ¨èè®­ç»ƒè§†é¢‘åˆ—è¡¨
  - æ˜¾ç¤ºåº·å¤ç›®æ ‡
  - æ ‡è®°ä»Šæ—¥å·²å®Œæˆçš„è§†é¢‘

#### è§†é¢‘æ’­æ”¾å™¨é¡µé¢
- **è·¯å¾„**ï¼š`pagesA/video-player/index.vue`
- **åŠŸèƒ½**ï¼š
  - è§†é¢‘æ’­æ”¾
  - è§‚çœ‹è¿›åº¦è¿½è¸ª
  - æ‰“å¡é¢æ¿ï¼ˆéš¾åº¦è¯„åˆ†ã€ç–¼ç—›ç¨‹åº¦ã€è®­ç»ƒç¬”è®°ï¼‰
  - æˆå°±è§£é”æç¤º
  - ç§¯åˆ†å¥–åŠ±

### 3. é…ç½®æ›´æ–°

#### pages.json
- æ·»åŠ äº† `pagesA/rehabilitation/index` é¡µé¢è·¯ç”±
- æ·»åŠ äº† `pagesA/video-player/index` é¡µé¢è·¯ç”±

#### image-diagnose/index.vue
- é›†æˆåº·å¤è®¡åˆ’åˆ›å»ºåŠŸèƒ½
- è¯Šæ–­å®Œæˆåè‡ªåŠ¨è¯¢é—®æ˜¯å¦åˆ›å»ºè®­ç»ƒè®¡åˆ’
- æ˜¾ç¤ºè®¡åˆ’è¯¦æƒ…å¹¶å¼•å¯¼ç”¨æˆ·å¼€å§‹è®­ç»ƒ

## ğŸ“‹ æ•°æ®åº“è®¾è®¡

### rehabilitation_videosï¼ˆåº·å¤è§†é¢‘åº“ï¼‰
```javascript
{
  _id: String,
  title: String,              // è§†é¢‘æ ‡é¢˜
  description: String,        // æè¿°
  videoUrl: String,          // è§†é¢‘URL
  thumbnailUrl: String,      // ç¼©ç•¥å›¾URL
  duration: Number,          // æ—¶é•¿ï¼ˆç§’ï¼‰
  difficulty: String,        // easy/medium/hard
  targetStage: Array,        // é€‚ç”¨åˆ†æœŸ ["I", "II"]
  category: String,          // flexibility/strength/balance/aerobic
  precautions: Array,        // æ³¨æ„äº‹é¡¹
  avgRating: Number         // å¹³å‡è¯„åˆ†
}
```

### rehabilitation_plansï¼ˆè®­ç»ƒè®¡åˆ’ï¼‰
```javascript
{
  userId: String,
  diagnosisStage: String,    // I/II/III/IV
  diagnosisId: String,
  videoIds: Array,           // æ¨èè§†é¢‘IDåˆ—è¡¨
  weeklyGoal: Number,        // æ¯å‘¨ç›®æ ‡æ¬¡æ•°
  currentWeek: Number,       // å½“å‰å‘¨æ¬¡
  totalWeeks: Number,        // æ€»å‘¨æ•°
  totalCheckIns: Number,     // ç´¯è®¡æ‰“å¡æ¬¡æ•°
  status: String            // active/paused/completed
}
```

### training_check_insï¼ˆæ‰“å¡è®°å½•ï¼‰
```javascript
{
  userId: String,
  planId: String,
  videoId: String,
  checkInDate: Date,
  duration: Number,          // è®­ç»ƒæ—¶é•¿
  feedback: {
    difficulty: Number,      // 1-5
    painLevel: Number,       // 1-5
    notes: String
  },
  points: Number,           // ç§¯åˆ†å¥–åŠ±
  images: Array             // æ‰“å¡ç…§ç‰‡ï¼ˆå¯é€‰ï¼‰
}
```

### user_rehabilitation_profilesï¼ˆç”¨æˆ·æ¡£æ¡ˆï¼‰
```javascript
{
  userId: String,
  statistics: {
    totalCheckIns: Number,
    totalTrainingTime: Number,
    currentStreak: Number,    // è¿ç»­æ‰“å¡å¤©æ•°
    longestStreak: Number,    // æœ€é•¿è¿ç»­
    totalPoints: Number
  },
  abilities: {
    flexibility: Number,      // 0-100
    strength: Number,
    balance: Number,
    endurance: Number
  }
}
```

## ğŸ¯ æ ¸å¿ƒåŠŸèƒ½æµç¨‹

### 1. æ™ºèƒ½æ¨èæµç¨‹
```
MRIè¯Šæ–­ â†’ è·å–åˆ†æœŸ(I-IV) â†’ æŸ¥è¯¢é€‚åˆçš„è§†é¢‘ â†’ ç”Ÿæˆè®­ç»ƒè®¡åˆ’ â†’ æ¨é€ç»™ç”¨æˆ·
```

### 2. è®­ç»ƒæ‰“å¡æµç¨‹
```
é€‰æ‹©è§†é¢‘ â†’ è§‚çœ‹è®­ç»ƒ(â‰¥30%) â†’ å¡«å†™åé¦ˆ â†’ æäº¤æ‰“å¡ â†’ è·å¾—ç§¯åˆ† â†’ æ›´æ–°è¿ç»­å¤©æ•° â†’ æ£€æŸ¥æˆå°±
```

### 3. åˆ†æœŸæ¨èè§„åˆ™

| åˆ†æœŸ | éš¾åº¦ | è§†é¢‘æ•° | æ¯å‘¨ç›®æ ‡ | è®­ç»ƒå‘¨æœŸ |
|------|------|--------|----------|----------|
| IæœŸ  | easy | 6ä¸ª    | 5æ¬¡/å‘¨   | 12å‘¨     |
| IIæœŸ | easy+medium | 8ä¸ª | 5æ¬¡/å‘¨ | 12å‘¨   |
| IIIæœŸ| easy | 6ä¸ª    | 3æ¬¡/å‘¨   | 8å‘¨      |
| IVæœŸ | easy | 4ä¸ª    | 3æ¬¡/å‘¨   | 8å‘¨      |

## ğŸ® æˆå°±ç³»ç»Ÿ

- **è¿ç»­æ‰“å¡7å¤©** - è§£é”"åšæŒä¸æ‡ˆ"
- **è¿ç»­æ‰“å¡30å¤©** - è§£é”"åº·å¤è¾¾äºº"
- **ç´¯è®¡æ‰“å¡50æ¬¡** - è§£é”"è®­ç»ƒå‹‡å£«"
- **ç´¯è®¡æ‰“å¡100æ¬¡** - è§£é”"åº·å¤ä¸“å®¶"

æ¯æ¬¡æ‰“å¡å¥–åŠ± **10ç§¯åˆ†**

## ğŸš€ éƒ¨ç½²æ­¥éª¤

### 1. ä¸Šä¼ äº‘å‡½æ•°
```bash
å³é”®äº‘å‡½æ•°æ–‡ä»¶å¤¹ â†’ ä¸Šä¼ å¹¶éƒ¨ç½²åˆ°äº‘æœåŠ¡ç©ºé—´
```

### 2. åˆ›å»ºæ•°æ®åº“é›†åˆ
åœ¨ uniCloud æ§åˆ¶å°åˆ›å»ºä»¥ä¸‹é›†åˆï¼š
- rehabilitation_videos
- rehabilitation_plans
- training_check_ins
- user_rehabilitation_profiles

### 3. å¯¼å…¥æµ‹è¯•æ•°æ®
å‚è€ƒ `docs/REHABILITATION_SETUP.md` å¯¼å…¥è§†é¢‘æ•°æ®

### 4. ä¸Šä¼ åº·å¤è§†é¢‘
å°†åº·å¤è®­ç»ƒè§†é¢‘ä¸Šä¼ åˆ°äº‘å­˜å‚¨ï¼Œæ›´æ–°æ•°æ®åº“URL

### 5. æµ‹è¯•åŠŸèƒ½
- å®ŒæˆMRIè¯Šæ–­
- åˆ›å»ºåº·å¤è®¡åˆ’
- è§‚çœ‹è§†é¢‘æ‰“å¡

## ğŸ“± å…¥å£ä½ç½®

### æ–¹å¼1ï¼šè¯Šæ–­åè‡ªåŠ¨åˆ›å»º
1. è¿›å…¥"å›¾åƒæ™ºèƒ½è¯Šæ–­"
2. ä¸Šä¼ MRIå›¾åƒå¹¶è¯Šæ–­
3. ç‚¹å‡»"ä¿å­˜ç»“æœ"
4. ç³»ç»Ÿæç¤ºåˆ›å»ºåº·å¤è®¡åˆ’
5. ç‚¹å‡»"ç«‹å³åˆ›å»º" â†’ è·³è½¬åˆ°åº·å¤è®­ç»ƒé¡µé¢

### æ–¹å¼2ï¼šç›´æ¥è®¿é—®
```javascript
uni.navigateTo({
  url: '/pagesA/rehabilitation/index'
})
```

### å»ºè®®ï¼šåœ¨é¦–é¡µæ·»åŠ å…¥å£
åœ¨ `pages/index/index.vue` æ·»åŠ åº·å¤è®­ç»ƒå¡ç‰‡ï¼š

```vue
<view class="function-card" @click="goToRehab">
  <image src="/static/icons/rehab-icon.png" class="card-icon"></image>
  <text class="card-title">åº·å¤è®­ç»ƒ</text>
  <text class="card-desc">ä¸ªæ€§åŒ–è®­ç»ƒè®¡åˆ’</text>
</view>
```

```javascript
goToRehab() {
  uni.navigateTo({
    url: '/pagesA/rehabilitation/index'
  })
}
```

## ğŸ¨ UIç‰¹ç‚¹

- **æ¸å˜ç´«è‰²ä¸»é¢˜**ï¼šå»¶ç»­é¡¹ç›®ç»Ÿä¸€é£æ ¼
- **å¡ç‰‡å¼è®¾è®¡**ï¼šæ¸…æ™°å±•ç¤ºè®­ç»ƒä¿¡æ¯
- **è¿›åº¦å¯è§†åŒ–**ï¼šè¿›åº¦æ¡ã€ç»Ÿè®¡æ•°æ®ã€å®Œæˆæ ‡è®°
- **äº¤äº’å‹å¥½**ï¼šè¯„åˆ†æ˜Ÿçº§ã€åé¦ˆè¡¨å•ã€æˆå°±æç¤º

## âš ï¸ æ³¨æ„äº‹é¡¹

1. **è§†é¢‘èµ„æº**ï¼šéœ€è¦å‡†å¤‡å®é™…çš„åº·å¤è®­ç»ƒè§†é¢‘
2. **äº‘å­˜å‚¨**ï¼šè§†é¢‘æ–‡ä»¶è¾ƒå¤§ï¼Œæ³¨æ„äº‘å­˜å‚¨å®¹é‡
3. **ç”¨æˆ·ç™»å½•**ï¼šåŠŸèƒ½éœ€è¦ç”¨æˆ·ç™»å½•çŠ¶æ€
4. **æ•°æ®åº“ç´¢å¼•**ï¼šä¸ºé«˜é¢‘æŸ¥è¯¢å­—æ®µæ·»åŠ ç´¢å¼•

## ğŸ”§ åç»­ä¼˜åŒ–å»ºè®®

1. **è§†é¢‘ç¼“å­˜**ï¼šå®ç°è§†é¢‘ç¦»çº¿ç¼“å­˜åŠŸèƒ½
2. **è®­ç»ƒæé†’**ï¼šé›†æˆå¾®ä¿¡è®¢é˜…æ¶ˆæ¯æ¨é€
3. **æ•°æ®åˆ†æ**ï¼šç”Ÿæˆåº·å¤è¿›åº¦æŠ¥å‘Šå’Œæ•°æ®å›¾è¡¨
4. **ç¤¾äº¤åŠŸèƒ½**ï¼šæ‰“å¡åˆ†äº«åˆ°ç¤¾åŒº
5. **AIè¯„ä¼°**ï¼šä½¿ç”¨AIåˆ†æè®­ç»ƒæ•ˆæœ

## ğŸ“Š æ•°æ®ç»Ÿè®¡

| æ–‡ä»¶ç±»å‹ | æ•°é‡ | ä»£ç è¡Œæ•° |
|---------|------|---------|
| äº‘å‡½æ•°   | 3    | ~400è¡Œ  |
| Vueé¡µé¢ | 2    | ~600è¡Œ  |
| æ–‡æ¡£     | 2    | ~400è¡Œ  |
| **æ€»è®¡** | **7** | **~1400è¡Œ** |

## ğŸ‰ å®ŒæˆçŠ¶æ€

âœ… æ‰€æœ‰æ ¸å¿ƒåŠŸèƒ½å·²å®ç°  
âœ… ä»£ç å·²é€šè¿‡è¯­æ³•æ£€æŸ¥  
âœ… é…ç½®æ–‡ä»¶å·²æ›´æ–°  
âœ… æ–‡æ¡£å·²å®Œå–„  

**ç³»ç»Ÿå¯ä»¥ç«‹å³éƒ¨ç½²ä½¿ç”¨ï¼**

---

**å¼€å‘æ—¶é—´**ï¼š2024-10-23  
**ç‰ˆæœ¬**ï¼šv1.0.0
